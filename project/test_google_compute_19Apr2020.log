Launch pytest -v --capture=no
set cloud='google'
cloud='google'
Timer: 0.0000s Load: 0.0000s (line_strip)
============================= test session starts ==============================
platform darwin -- Python 3.8.1, pytest-5.4.1, py-1.8.1, pluggy-0.13.1 -- /Users/rahul/ENV3/bin/python3.8
cachedir: .pytest_cache
rootdir: /Users/rahul/cm/projects/cloudmesh-cloud, inifile: pytest.ini
plugins: cov-2.8.1
collecting ... Test run for google
collected 2 items

tests/cloud/test_00_sys.py::Test_Sys::test_cms_help 
[35m
# ######################################################################
# test_cms_help /tests/cloud/test_00_sys.py 28
# ######################################################################
[0m
[31mERROR: problem executing subprocess[0m

Trace:
Traceback (most recent call last):
      File "/Users/rahul/cm/cloudmesh-common/cloudmesh/common/Shell.py", line 358, in execute
        result = subprocess.check_output(
      File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/subprocess.py", line 411, in check_output
        return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
      File "/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/subprocess.py", line 512, in run
        raise CalledProcessError(retcode, process.args,
    subprocess.CalledProcessError: Command '['cms help']' returned non-zero exit status 1.

[34m
# ----------------------------------------------------------------------
# result
# ----------------------------------------------------------------------
# 34:test_cms_help ./tests/cloud/test_00_sys.py
# ----------------------------------------------------------------------
# None
# ----------------------------------------------------------------------
[0m
PASSED
tests/cloud/test_00_sys.py::Test_Sys::test_benchmark 
+------------------+---------------------------------------------------------------------------------------------------+
| Attribute        | Value                                                                                             |
|------------------+---------------------------------------------------------------------------------------------------|
| cpu_count        | 4                                                                                                 |
| mem.active       | 4.8 GiB                                                                                           |
| mem.available    | 9.4 GiB                                                                                           |
| mem.free         | 4.6 GiB                                                                                           |
| mem.inactive     | 3.3 GiB                                                                                           |
| mem.percent      | 41.3 %                                                                                            |
| mem.total        | 16.0 GiB                                                                                          |
| mem.used         | 6.6 GiB                                                                                           |
| mem.wired        | 1.8 GiB                                                                                           |
| platform.version | 10.14.6                                                                                           |
| python           | 3.8.1 (v3.8.1:1b293b6006, Dec 18 2019, 14:08:53)                                                  |
|                  | [Clang 6.0 (clang-600.0.57)]                                                                      |
| python.pip       | 20.0.2                                                                                            |
| python.version   | 3.8.1                                                                                             |
| sys.platform     | darwin                                                                                            |
| uname.machine    | x86_64                                                                                            |
| uname.node       | rjdharmc-mac                                                                                      |
| uname.processor  | i386                                                                                              |
| uname.release    | 18.7.0                                                                                            |
| uname.system     | Darwin                                                                                            |
| uname.version    | Darwin Kernel Version 18.7.0: Mon Feb 10 21:08:45 PST 2020; root:xnu-4903.278.28~1/RELEASE_X86_64 |
| user             | rahul                                                                                             |
+------------------+---------------------------------------------------------------------------------------------------+

+---------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------+
| Name                      | Status   |   Time | Start               | tag    | Node         | User   | OS     | Version   |
|---------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------|
| test_00_sys/test_cms_help | ok       |  1.479 | 2020-04-20 00:28:18 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
+---------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------+

# csv,timer,status,time,start,tag,uname.node,user,uname.system,platform.version
# csv,test_00_sys/test_cms_help,ok,1.479,2020-04-20 00:28:18,google,rjdharmc-mac,rahul,Darwin,10.14.6

PASSED

============================== 2 passed in 1.82s ===============================
============================= test session starts ==============================
platform darwin -- Python 3.8.1, pytest-5.4.1, py-1.8.1, pluggy-0.13.1 -- /Users/rahul/ENV3/bin/python3.8
cachedir: .pytest_cache
rootdir: /Users/rahul/cm/projects/cloudmesh-cloud, inifile: pytest.ini
plugins: cov-2.8.1
collecting ... Test run for google
collected 4 items

tests/cloud/test_01_clean_local_remote.py::Test_Clean_Local_Remote::test_cms_init init
MongoDB stop
server should be down...
deleting: /Users/rahul/.cloudmesh/mongodb
MongoDB folder deleted
MongoDB create
admin mongo create

# ----------------------------------------------------------------------
# arguments
# ----------------------------------------------------------------------
# 122:do_admin /Users/rahul/cm/cloudmesh-admin/cloudmesh/admin/command/admin.py
# ----------------------------------------------------------------------
# {'--brew': False,
#  '--docker': False,
#  '--download': None,
#  '--dryrun': False,
#  '--force': False,
#  '--nosudo': False,
#  '--output': None,
#  'FILENAME': None,
#  'MODE': None,
#  'PASSWORD': None,
#  'backup': False,
#  'create': True,
#  'docker': False,
#  'dryrun': False,
#  'force': False,
#  'info': False,
#  'install': False,
#  'list': False,
#  'load': False,
#  'mode': False,
#  'mongo': True,
#  'nosudo': False,
#  'output': 'table',
#  'password': False,
#  'security': False,
#  'ssh': False,
#  'start': False,
#  'stats': False,
#  'status': False,
#  'stop': False,
#  'system': False,
#  'version': False}
# ----------------------------------------------------------------------

MongoDB create
INFO: Starting mongo without authentication ... 
about to fork child process, waiting until server is ready for connections.
forked process: 2530
child process started successfully, parent exiting

None
INFO: Creating admin user ... 
Administrative user created.
INFO: Stopping the service ... 
server should be down...
Timer: 1.0000s Load: 0.0000s (line_strip)
admin mongo start

# ----------------------------------------------------------------------
# arguments
# ----------------------------------------------------------------------
# 122:do_admin /Users/rahul/cm/cloudmesh-admin/cloudmesh/admin/command/admin.py
# ----------------------------------------------------------------------
# {'--brew': False,
#  '--docker': False,
#  '--download': None,
#  '--dryrun': False,
#  '--force': False,
#  '--nosudo': False,
#  '--output': None,
#  'FILENAME': None,
#  'MODE': None,
#  'PASSWORD': None,
#  'backup': False,
#  'create': False,
#  'docker': False,
#  'dryrun': False,
#  'force': False,
#  'info': False,
#  'install': False,
#  'list': False,
#  'load': False,
#  'mode': False,
#  'mongo': True,
#  'nosudo': False,
#  'output': 'table',
#  'password': False,
#  'security': False,
#  'ssh': False,
#  'start': True,
#  'stats': False,
#  'status': False,
#  'stop': False,
#  'system': False,
#  'version': False}
# ----------------------------------------------------------------------

MongoDB start
about to fork child process, waiting until server is ready for connections.
forked process: 2538
child process started successfully, parent exiting

None
Timer: 1.0000s Load: 0.0000s (line_strip)
Set key
Config Security Initialization
key add
Timer: 0.0000s Load: 0.0000s (line_strip)
sec load

+---------+-------+----------+-----------+-----------+
| Group   | Rule  | Protocol | Ports     | IP Range  |
+---------+-------+----------+-----------+-----------+
| default | ssh   | tcp      | 22:22     | 0.0.0.0/0 |
| default | icmp  | icmp     |           | 0.0.0.0/0 |
| default | http  | tcp      | 80:80     | 0.0.0.0/0 |
| default | https | tcp      | 443:443   | 0.0.0.0/0 |
| flask   | ssh   | tcp      | 22:22     | 0.0.0.0/0 |
| flask   | icmp  | icmp     |           | 0.0.0.0/0 |
| flask   | http  | tcp      | 80:80     | 0.0.0.0/0 |
| flask   | https | tcp      | 443:443   | 0.0.0.0/0 |
| flask   | flask | tcp      | 8000:8000 | 0.0.0.0/0 |
+---------+-------+----------+-----------+-----------+
Timer: 1.0000s Load: 0.0000s (line_strip)

Variables

    timer=True
    cloud=google
    vm=rahul-vm-[129-131]
    debug=True
    trace=True
    verbose=10
    key=rahul
    refresh=False
Timer: 7.0000s Load: 0.0000s (line_strip)

[35m
# ######################################################################
# test_cms_init /tests/cloud/test_01_clean_local_remote.py 35
# ######################################################################
[0m
PASSED
tests/cloud/test_01_clean_local_remote.py::Test_Clean_Local_Remote::test_delete_all_keys_from_cloud 
[35m
# ######################################################################
# test_delete_all_keys_from_cloud /tests/cloud/test_01_clean_local_remote.py 41
# ######################################################################
[0m
[34mINFO: Waiting for compute.projects.setCommonInstanceMetadata operation to finish : rahul[0m
[32mcompute.projects.setCommonInstanceMetadata on rahul is complete.[0m
[32mKey rahul is deleted.[0m
None
PASSED
tests/cloud/test_01_clean_local_remote.py::Test_Clean_Local_Remote::test_delete_all_secgroups_from_cloud 
[35m
# ######################################################################
# test_delete_all_secgroups_from_cloud /tests/cloud/test_01_clean_local_remote.py 59
# ######################################################################
[0m
PASSED
tests/cloud/test_01_clean_local_remote.py::Test_Clean_Local_Remote::test_benchmark 

+------------------------------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------+
| Name                                                       | Status   |   Time | Start               | tag    | Node         | User   | OS     | Version   |
|------------------------------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------|
| test_01_clean_local_remote/test_cms_init                   | ok       |  7.341 | 2020-04-20 00:28:20 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_01_clean_local_remote/test_delete_all_keys_from_cloud | ok       | 12.323 | 2020-04-20 00:28:29 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
+------------------------------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------+

PASSED

============================== 4 passed in 21.39s ==============================
============================= test session starts ==============================
platform darwin -- Python 3.8.1, pytest-5.4.1, py-1.8.1, pluggy-0.13.1 -- /Users/rahul/ENV3/bin/python3.8
cachedir: .pytest_cache
rootdir: /Users/rahul/cm/projects/cloudmesh-cloud, inifile: pytest.ini
plugins: cov-2.8.1
collecting ... Test run for google on key test-key
collected 11 items

tests/cloud/test_02_key.py::Test_Key::test_clear_local_database 
[35m
# ######################################################################
# test_clear_local_database /tests/cloud/test_02_key.py 39
# ######################################################################
[0m
PASSED
tests/cloud/test_02_key.py::Test_Key::test_clear_cloud_database 
[35m
# ######################################################################
# test_clear_cloud_database /tests/cloud/test_02_key.py 46
# ######################################################################
[0m
PASSED
tests/cloud/test_02_key.py::Test_Key::test_upload_key_to_database 
[35m
# ######################################################################
# test_upload_key_to_database /tests/cloud/test_02_key.py 53
# ######################################################################
[0m
<cloudmesh.key.Key.Key object at 0x10eb533a0>
PASSED
tests/cloud/test_02_key.py::Test_Key::test_upload_key_to_cloud 
[35m
# ######################################################################
# test_upload_key_to_cloud /tests/cloud/test_02_key.py 66
# ######################################################################
[0m
[34m
# ----------------------------------------------------------------------
# key
# ----------------------------------------------------------------------
# 80:test_upload_key_to_cloud ./tests/cloud/test_02_key.py
# ----------------------------------------------------------------------
# {'_id': ObjectId('5e9cecbb0fb08ad61dd228df'),
#  'cm': {'cloud': 'local',
#         'collection': 'local-key',
#         'created': '2020-04-20 00:28:43.046826',
#         'kind': 'key',
#         'modified': '2020-04-20 00:28:43.046826',
#         'name': 'test-key'},
#  'comment': 'rahul@rjdharmc-mac',
#  'fingerprint': 'b5:3a:38:fe:48:f2:6a:ce:0b:f1:b1:a5:46:15:9d:a1',
#  'group': ['local', 'ssh'],
#  'key': 'AAAAB3NzaC1yc2EAAAADAQABAAABAQCnl97JCwm3jfWyZfwNjaigjPCskQvlkNubofrlvyX0X3tBcM0+AXgNg2sp1xaaogmYFSzb6f6Zlb64mqu04qqVHQGGno3gg1NKBWS8vxh4fTObhMaaqQgG1Dk/ZUStJ4M8F4ZxRZcIdUZUYzbeb4GNK7OYL60HH06Xbw7iJUft/QLzhIomSSsKVbPbTqijWNDQ6jIra8T1LhcbbcUid8fyiQuI/koueJQAtHznlysWbCpWMm4cQ9PIZdX1MCgNKb/4YTVhTioRxxKih49B5DW2Ayr6d6ciAtZbUWdKYe7vBSled+wm/x1BdpofQ8xMu4E4wUpZEKH/V1GS4FGUQkgZ',
#  'location': {'private': '/Users/rahul/.ssh/id_rsa',
#               'public': '/Users/rahul/.ssh/id_rsa.pub'},
#  'name': 'test-key',
#  'path': '/Users/rahul/.ssh/id_rsa.pub',
#  'profile': {'email': 'rjdharmc@iu.edu',
#              'firstname': 'rahul',
#              'github': 'iumsds',
#              'lastname': 'd',
#              'publickey': '~/.ssh/id_rsa.pub',
#              'user': 'rahul'},
#  'public_key': 'ssh-rsa '
#                'AAAAB3NzaC1yc2EAAAADAQABAAABAQCnl97JCwm3jfWyZfwNjaigjPCskQvlkNubofrlvyX0X3tBcM0+AXgNg2sp1xaaogmYFSzb6f6Zlb64mqu04qqVHQGGno3gg1NKBWS8vxh4fTObhMaaqQgG1Dk/ZUStJ4M8F4ZxRZcIdUZUYzbeb4GNK7OYL60HH06Xbw7iJUft/QLzhIomSSsKVbPbTqijWNDQ6jIra8T1LhcbbcUid8fyiQuI/koueJQAtHznlysWbCpWMm4cQ9PIZdX1MCgNKb/4YTVhTioRxxKih49B5DW2Ayr6d6ciAtZbUWdKYe7vBSled+wm/x1BdpofQ8xMu4E4wUpZEKH/V1GS4FGUQkgZ '
#                'rahul@rjdharmc-mac',
#  'source': 'ssh',
#  'type': 'ssh-rsa',
#  'uri': 'file:///Users/rahul/.ssh/id_rsa.pub'}
# ----------------------------------------------------------------------
[0m
[34mINFO: Waiting for compute.projects.setCommonInstanceMetadata operation to finish : test-key[0m
[32mcompute.projects.setCommonInstanceMetadata on test-key is complete.[0m
PASSED
tests/cloud/test_02_key.py::Test_Key::test_list_key_from_cloud 
[35m
# ######################################################################
# test_list_key_from_cloud /tests/cloud/test_02_key.py 86
# ######################################################################
[0m
PASSED
tests/cloud/test_02_key.py::Test_Key::test_delete_key_from_cloud 
[35m
# ######################################################################
# test_delete_key_from_cloud /tests/cloud/test_02_key.py 103
# ######################################################################
[0m
[34mINFO: Waiting for compute.projects.setCommonInstanceMetadata operation to finish : test-key[0m
[32mcompute.projects.setCommonInstanceMetadata on test-key is complete.[0m
[32mKey test-key is deleted.[0m
None
PASSED
tests/cloud/test_02_key.py::Test_Key::test_get_key_from_cloud 
[35m
# ######################################################################
# test_get_key_from_cloud /tests/cloud/test_02_key.py 113
# ######################################################################
[0m
PASSED
tests/cloud/test_02_key.py::Test_Key::test_key_delete 
[35m
# ######################################################################
# test_key_delete /tests/cloud/test_02_key.py 117
# ######################################################################
[0m

[35m
# ######################################################################
# test_clear_cloud_database /tests/cloud/test_02_key.py 46
# ######################################################################
[0m
PASSED
tests/cloud/test_02_key.py::Test_Key::test_cms_local key add
Timer: 0.0000s Load: 0.0000s (line_strip)

[35m
# ######################################################################
# test_cms_local /tests/cloud/test_02_key.py 123
# ######################################################################
[0m
PASSED
tests/cloud/test_02_key.py::Test_Key::test_cms_cloud key upload --cloud=google
cloud google
INFO: Waiting for compute.projects.setCommonInstanceMetadata operation to finish : rahul
compute.projects.setCommonInstanceMetadata on rahul is complete.
upload key 'rahul successful'. 
Timer: 11.0000s Load: 0.0000s (line_strip)

[35m
# ######################################################################
# test_cms_cloud /tests/cloud/test_02_key.py 130
# ######################################################################
[0m

[35m
# ######################################################################
# test_clear_cloud_database /tests/cloud/test_02_key.py 46
# ######################################################################
[0m
PASSED
tests/cloud/test_02_key.py::Test_Key::test_benchmark 

+-----------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------+
| Name                                    | Status   |   Time | Start               | tag    | Node         | User   | OS     | Version   |
|-----------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------|
| test_02_key/test_clear_local_database   | ok       |  0.041 | 2020-04-20 00:28:42 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_02_key/test_clear_cloud_database   | ok       |  0.018 | 2020-04-20 00:29:13 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_02_key/test_upload_key_to_database | ok       |  0.054 | 2020-04-20 00:28:43 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_02_key/test_upload_key_to_cloud    | ok       | 10.988 | 2020-04-20 00:28:43 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_02_key/test_list_key_from_cloud    | ok       |  1.07  | 2020-04-20 00:28:54 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_02_key/test_delete_key_from_cloud  | ok       | 15.904 | 2020-04-20 00:28:55 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_02_key/test_key_delete             | ok       |  0.033 | 2020-04-20 00:29:11 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_02_key/test_cms_local              | ok       |  2.413 | 2020-04-20 00:29:11 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_02_key/test_cms_cloud              | ok       | 14.523 | 2020-04-20 00:29:13 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
+-----------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------+

# csv,timer,status,time,start,tag,uname.node,user,uname.system,platform.version
# csv,test_02_key/test_clear_local_database,ok,0.041,2020-04-20 00:28:42,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_02_key/test_clear_cloud_database,ok,0.018,2020-04-20 00:29:13,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_02_key/test_upload_key_to_database,ok,0.054,2020-04-20 00:28:43,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_02_key/test_upload_key_to_cloud,ok,10.988,2020-04-20 00:28:43,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_02_key/test_list_key_from_cloud,ok,1.07,2020-04-20 00:28:54,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_02_key/test_delete_key_from_cloud,ok,15.904,2020-04-20 00:28:55,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_02_key/test_key_delete,ok,0.033,2020-04-20 00:29:11,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_02_key/test_cms_local,ok,2.413,2020-04-20 00:29:11,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_02_key/test_cms_cloud,ok,14.523,2020-04-20 00:29:13,google,rjdharmc-mac,rahul,Darwin,10.14.6

PASSED

============================= 11 passed in 46.08s ==============================
============================= test session starts ==============================
platform darwin -- Python 3.8.1, pytest-5.4.1, py-1.8.1, pluggy-0.13.1 -- /Users/rahul/ENV3/bin/python3.8
cachedir: .pytest_cache
rootdir: /Users/rahul/cm/projects/cloudmesh-cloud, inifile: pytest.ini
plugins: cov-2.8.1
collecting ... Test run for google
collected 6 items

tests/cloud/test_04_flavor.py::Test_Flavor::test_empty_database 
[35m
# ######################################################################
# test_empty_database /tests/cloud/test_04_flavor.py 38
# ######################################################################
[0m
PASSED
tests/cloud/test_04_flavor.py::Test_Flavor::test_provider_flavor 
[35m
# ######################################################################
# test_provider_flavor /tests/cloud/test_04_flavor.py 44
# ######################################################################
[0m
PASSED
tests/cloud/test_04_flavor.py::Test_Flavor::test_provider_flavor_update 
[35m
# ######################################################################
# test_provider_flavor_update /tests/cloud/test_04_flavor.py 50
# ######################################################################
[0m
PASSED
tests/cloud/test_04_flavor.py::Test_Flavor::test_cms_flavor_refresh 
[35m
# ######################################################################
# test_cms_flavor_refresh /tests/cloud/test_04_flavor.py 58
# ######################################################################
[0m
PASSED
tests/cloud/test_04_flavor.py::Test_Flavor::test_cms_flavor 
[35m
# ######################################################################
# test_cms_flavor /tests/cloud/test_04_flavor.py 65
# ######################################################################
[0m
PASSED
tests/cloud/test_04_flavor.py::Test_Flavor::test_benchmark 

+--------------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------+
| Name                                       | Status   |   Time | Start               | tag    | Node         | User   | OS     | Version   |
|--------------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------|
| test_04_flavor/test_empty_database         | ok       |  0.028 | 2020-04-20 00:29:29 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_04_flavor/test_provider_flavor        | ok       |  1.397 | 2020-04-20 00:29:29 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_04_flavor/test_provider_flavor_update | ok       |  1.197 | 2020-04-20 00:29:31 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_04_flavor/test_cms_flavor_refresh     | ok       |  2.177 | 2020-04-20 00:29:32 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_04_flavor/test_cms_flavor             | ok       |  1.323 | 2020-04-20 00:29:34 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
+--------------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------+

# csv,timer,status,time,start,tag,uname.node,user,uname.system,platform.version
# csv,test_04_flavor/test_empty_database,ok,0.028,2020-04-20 00:29:29,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_04_flavor/test_provider_flavor,ok,1.397,2020-04-20 00:29:29,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_04_flavor/test_provider_flavor_update,ok,1.197,2020-04-20 00:29:31,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_04_flavor/test_cms_flavor_refresh,ok,2.177,2020-04-20 00:29:32,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_04_flavor/test_cms_flavor,ok,1.323,2020-04-20 00:29:34,google,rjdharmc-mac,rahul,Darwin,10.14.6

PASSED

============================== 6 passed in 7.27s ===============================
============================= test session starts ==============================
platform darwin -- Python 3.8.1, pytest-5.4.1, py-1.8.1, pluggy-0.13.1 -- /Users/rahul/ENV3/bin/python3.8
cachedir: .pytest_cache
rootdir: /Users/rahul/cm/projects/cloudmesh-cloud, inifile: pytest.ini
plugins: cov-2.8.1
collecting ... Test run for google
collected 6 items

tests/cloud/test_05_image.py::Test_Image::test_empty_database 
[35m
# ######################################################################
# test_empty_database /tests/cloud/test_05_image.py 38
# ######################################################################
[0m
PASSED
tests/cloud/test_05_image.py::Test_Image::test_provider_image 
[35m
# ######################################################################
# test_provider_image /tests/cloud/test_05_image.py 44
# ######################################################################
[0m
PASSED
tests/cloud/test_05_image.py::Test_Image::test_provider_image_update 
[35m
# ######################################################################
# test_provider_image_update /tests/cloud/test_05_image.py 50
# ######################################################################
[0m
PASSED
tests/cloud/test_05_image.py::Test_Image::test_cms_image_refresh 
[35m
# ######################################################################
# test_cms_image_refresh /tests/cloud/test_05_image.py 58
# ######################################################################
[0m
PASSED
tests/cloud/test_05_image.py::Test_Image::test_cms_image 
[35m
# ######################################################################
# test_cms_image /tests/cloud/test_05_image.py 65
# ######################################################################
[0m
PASSED
tests/cloud/test_05_image.py::Test_Image::test_benchmark 

+------------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------+
| Name                                     | Status   |   Time | Start               | tag    | Node         | User   | OS     | Version   |
|------------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------|
| test_05_image/test_empty_database        | ok       |  0.027 | 2020-04-20 00:29:37 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_05_image/test_provider_image        | ok       |  5.443 | 2020-04-20 00:29:37 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_05_image/test_provider_image_update | ok       |  5.586 | 2020-04-20 00:29:43 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_05_image/test_cms_image_refresh     | ok       |  6.224 | 2020-04-20 00:29:49 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_05_image/test_cms_image             | ok       |  1.317 | 2020-04-20 00:29:55 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
+------------------------------------------+----------+--------+---------------------+--------+--------------+--------+--------+-----------+

# csv,timer,status,time,start,tag,uname.node,user,uname.system,platform.version
# csv,test_05_image/test_empty_database,ok,0.027,2020-04-20 00:29:37,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_05_image/test_provider_image,ok,5.443,2020-04-20 00:29:37,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_05_image/test_provider_image_update,ok,5.586,2020-04-20 00:29:43,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_05_image/test_cms_image_refresh,ok,6.224,2020-04-20 00:29:49,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_05_image/test_cms_image,ok,1.317,2020-04-20 00:29:55,google,rjdharmc-mac,rahul,Darwin,10.14.6

PASSED

============================== 6 passed in 19.75s ==============================
============================= test session starts ==============================
platform darwin -- Python 3.8.1, pytest-5.4.1, py-1.8.1, pluggy-0.13.1 -- /Users/rahul/ENV3/bin/python3.8
cachedir: .pytest_cache
rootdir: /Users/rahul/cm/projects/cloudmesh-cloud, inifile: pytest.ini
plugins: cov-2.8.1
collecting ... [34m
# ----------------------------------------------------------------------
# variables.dict()
# ----------------------------------------------------------------------
# 27:<module> ./tests/cloud/test_08_vm_provider.py
# ----------------------------------------------------------------------
# {'cloud': 'google',
#  'debug': 'True',
#  'key': 'rahul',
#  'refresh': 'False',
#  'timer': 'True',
#  'trace': 'True',
#  'verbose': '10',
#  'vm': 'rahul-vm-[129-131]'}
# ----------------------------------------------------------------------
[0m
Test run for google
collected 12 items

tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_key_upload key add
Timer: 0.0000s Load: 0.0000s (line_strip)
key list
+----------+---------+-------------------------------------------------+--------------------+---------------+
| Name     | Type    | Fingerprint                                     | Comment            | Group         |
+----------+---------+-------------------------------------------------+--------------------+---------------+
| test-key | ssh-rsa | b5:3a:38:fe:48:f2:6a:ce:0b:f1:b1:a5:46:15:9d:a1 | rahul@rjdharmc-mac | local, ssh    |
| rahul    | ssh-rsa | b5:3a:38:fe:48:f2:6a:ce:0b:f1:b1:a5:46:15:9d:a1 | rahul@rjdharmc-mac | l, o, c, a, l |
+----------+---------+-------------------------------------------------+--------------------+---------------+
Timer: 0.0000s Load: 0.0000s (line_strip)
key delete rahul --cloud=google
INFO: Waiting for compute.projects.setCommonInstanceMetadata operation to finish : rahul
compute.projects.setCommonInstanceMetadata on rahul is complete.
Key rahul is deleted.
Timer: 12.0000s Load: 0.0000s (line_strip)
key upload rahul --cloud=google
cloud google
INFO: Waiting for compute.projects.setCommonInstanceMetadata operation to finish : rahul
compute.projects.setCommonInstanceMetadata on rahul is complete.
upload key 'rahul successful'. 
Timer: 17.0000s Load: 0.0000s (line_strip)
key list --cloud=google
cloud google
+--------+---------+-------------------------------------------------+--------------------+---------+
| Name   | Type    | Fingerprint                                     | Comment            | Group   |
|--------+---------+-------------------------------------------------+--------------------+---------|
| rahul  | ssh-rsa | b5:3a:38:fe:48:f2:6a:ce:0b:f1:b1:a5:46:15:9d:a1 | rahul@rjdharmc-mac | google  |
+--------+---------+-------------------------------------------------+--------------------+---------+
Timer: 1.0000s Load: 0.0000s (line_strip)
PASSED
tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_find_largest_id test-rahul-vm-135
VM is [{'zone': 'us-west2-b', 'name': 'lampstack-2-vm', 'cloud': 'google', 'status': 'TERMINATED', 'type': 'Unknown CPU Platform', 'created': '2020-04-19T15:20:45.597-07:00', 'id': '8511304656472862802', 'kind': 'compute#instance', 'fingerprint': 'Ie7zeeoF_As=', 'machineType': 'f1-micro', 'deviceName': 'lampstack-vm-tmpl-boot-disk', 'diskSizeGb': '10', 'sourceImage': 'debian-9-stretch', 'diskType': 'PERSISTENT', 'mode': 'READ_WRITE', 'modified': '2020-04-20 00:30:34.901722', 'metadata': [{'key': 'bitnami-base-password', 'value': 'Wsq6Zm4VqhcH'}, {'key': 'status-config-url', 'value': 'https://runtimeconfig.googleapis.com/v1beta1/projects/prefab-manifest-269104/configs/lampstack-2-config'}, {'key': 'status-variable-path', 'value': 'status'}, {'key': 'status-uptime-deadline', 'value': '420'}, {'key': 'startup-script', 'value': '#!/bin/bash\n\nset -e\n\nDEFAULT_UPTIME_DEADLINE="300"  # 5 minutes\n\nmetadata_value() {\n  curl --retry 5 -sfH "Metadata-Flavor: Google" \\\n       "http://metadata/computeMetadata/v1/$1"\n}\n\naccess_token() {\n  metadata_value "instance/service-accounts/default/token" \\\n  | python -c "import sys, json; print json.load(sys.stdin)[\'access_token\']"\n}\n\nuptime_seconds() {\n  seconds="$(cat /proc/uptime | cut -d\' \' -f1)"\n  echo ${seconds%%.*}  # delete floating point.\n}\n\nconfig_url() { metadata_value "instance/attributes/status-config-url"; }\ninstance_id() { metadata_value "instance/id"; }\nvariable_path() { metadata_value "instance/attributes/status-variable-path"; }\nproject_name() { metadata_value "project/project-id"; }\nuptime_deadline() {\n  metadata_value "instance/attributes/status-uptime-deadline" \\\n      || echo $DEFAULT_UPTIME_DEADLINE\n}\n\nconfig_name() {\n  python - $(config_url) <<EOF\nimport sys, urlparse\nparsed = urlparse.urlparse(sys.argv[1])\nprint \'/\'.join(parsed.path.rstrip(\'/\').split(\'/\')[-4:])\nEOF\n}\n\nvariable_body() {\n  encoded_value=$(echo "$2" | base64)\n  printf \'{"name":"%s", "value":"%s"}\\n\' "$1" "$encoded_value"\n}\n\npost_result() {\n  var_subpath=$1\n  var_value=$2\n  var_path="$(config_name)/variables/$var_subpath/$(instance_id)"\n\n  curl --retry 5 -sH "Authorization: Bearer $(access_token)" \\\n      -H "Content-Type: application/json" \\\n      -X POST -d "$(variable_body "$var_path" "$var_value")" \\\n      "$(config_url)/variables"\n}\n\npost_success() {\n  post_result "$(variable_path)/success" "${1:-Success}"\n}\n\npost_failure() {\n  post_result "$(variable_path)/failure" "${1:-Failure}"\n}\n\n# The contents of initScript are contained within this function.\ncustom_init() (\n  return 0\n)\n\n# The contents of checkScript are contained within this function.\ncheck_success() (\n  failed=$(/etc/init.d/bitnami status | grep "not running" | cut -d" " -f1 | tr "\\n" " ")\n  if [ ! -z "$failed" ]; then\n    echo "Processes failed to start: $failed"\n    exit 1\n  fi\n)\n\ncheck_success_with_retries() {\n  deadline="$(uptime_deadline)"\n  while [ "$(uptime_seconds)" -lt "$deadline" ]; do\n    message=$(check_success)\n    case $? in\n    0)\n      # Success.\n      return 0\n      ;;\n    1)\n      # Not ready; continue loop\n      ;;\n    *)\n      # Failure; abort.\n      echo $message\n      return 1\n      ;;\n    esac\n\n    sleep 5\n  done\n\n  # The check was not successful within the required deadline.\n  echo "status check timeout"\n  return 1\n}\n\ndo_init() {\n  # Run the init script first. If no init script was specified, this\n  # is a no-op.\n  echo "software-status: initializing..."\n\n  set +e\n  message="$(custom_init)"\n  result=$?\n  set -e\n\n  if [ $result -ne 0 ]; then\n    echo "software-status: init failure"\n    post_failure "$message"\n    return 1\n  fi\n}\n\ndo_check() {\n  # Poll for success.\n  echo "software-status: waiting for software to become ready..."\n  set +e\n  message="$(check_success_with_retries)"\n  result=$?\n  set -e\n\n  if [ $result -eq 0 ]; then\n    echo "software-status: success"\n    post_success\n  else\n    echo "software-status: failed with message: $message"\n    post_failure "$message"\n  fi\n}\n\n# Run the initialization script synchronously.\ndo_init || exit $?\n\n# The actual software initialization might come after google\'s init.d\n# script that executes our startup script. Thus, launch this script\n# into the background so that it does not block init and eventually\n# timeout while waiting for software to start.\ndo_check & disown'}, {'key': 'google-monitoring-enable', 'value': '0'}, {'key': 'google-logging-enable', 'value': '0'}], 'network_fingerprint': 'P7-4ZTvyK9s=', 'networkIP': '10.168.15.205', 'ip_public': 'Not Defined', 'cm': {'kind': 'vm', 'driver': 'google', 'cloud': 'google', 'name': 'lampstack-2-vm', 'updated': '2020-04-20 00:30:34.901770', 'created': '2020-04-20 00:30:34.932778', 'status': 'TERMINATED', 'collection': 'google-vm', 'modified': '2020-04-20 00:30:34.932778'}, '_id': ObjectId('5e9ced2a0e2812c14023b79f')}, {'zone': 'us-west2-b', 'name': 'test-rahul-vm-134', 'cloud': 'google', 'status': 'RUNNING', 'type': 'Intel Skylake', 'created': '2020-04-19T15:17:56.166-07:00', 'id': '6069526653895274748', 'kind': 'compute#instance', 'fingerprint': 'Pt0GqDEfS5g=', 'machineType': 'g1-small', 'deviceName': 'test-rahul-vm-134-disk', 'diskSizeGb': '10', 'sourceImage': 'ubuntu-1910', 'diskType': 'PERSISTENT', 'mode': 'READ_WRITE', 'modified': '2020-04-20 00:30:34.901751', 'metadata': [{'key': 'startup-script', 'value': ''}, {'key': 'bucket', 'value': 'cloudmesh-bucket'}, {'key': 'cm', 'value': "{'kind': 'vm', 'name': 'test-rahul-vm-134', 'label': 'test-rahul-vm-134', 'group': 'default', 'cloud': 'google', 'status': 'available', 'collection': 'google-vm', 'created': '2020-04-19 22:17:53.562383', 'modified': '2020-04-19 22:17:53.562383', 'creation': '9.00'}"}, {'key': 'image', 'value': 'ubuntu-1910'}, {'key': 'size', 'value': '10'}], 'network_fingerprint': 'IMxMUPX5erQ=', 'networkIP': '10.168.15.204', 'ip_public': '35.215.109.219', 'cm': {'kind': 'vm', 'driver': 'google', 'cloud': 'google', 'name': 'test-rahul-vm-134', 'updated': '2020-04-20 00:30:34.901781', 'created': '2020-04-20 00:30:34.970158', 'status': 'RUNNING', 'collection': 'google-vm', 'modified': '2020-04-20 00:30:34.970158'}, '_id': ObjectId('5e9ced2a0e2812c14023b7a0')}]
FAILED
tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_provider_vm_create vm list --cloud=google
List google
+-------------------+---------+--------+---------------------+----------------------+------------+------------+----------------+-----------------------------+----------------+------------------+-------------+----------------------+-------------------------------+
| Name              | Cloud   | Kind   |                  Id | Type                 | Zone       | Status     | External IP    | Disk Name                   |   OS Disk Size | OS Name          | Disk Type   | Provisioning State   | Created                       |
|-------------------+---------+--------+---------------------+----------------------+------------+------------+----------------+-----------------------------+----------------+------------------+-------------+----------------------+-------------------------------|
| lampstack-2-vm    | google  | vm     | 8511304656472862802 | Unknown CPU Platform | us-west2-b | TERMINATED | Not Defined    | lampstack-vm-tmpl-boot-disk |             10 | debian-9-stretch | PERSISTENT  | READ_WRITE           | 2020-04-19T15:20:45.597-07:00 |
| test-rahul-vm-134 | google  | vm     | 6069526653895274748 | Intel Skylake        | us-west2-b | RUNNING    | 35.215.109.219 | test-rahul-vm-134-disk      |             10 | ubuntu-1910      | PERSISTENT  | READ_WRITE           | 2020-04-19T15:17:56.166-07:00 |
+-------------------+---------+--------+---------------------+----------------------+------------+------------+----------------+-----------------------------+----------------+------------------+-------------+----------------------+-------------------------------+
Timer: 0.0000s Load: 0.0000s (line_strip)

[35m
# ######################################################################
# test_provider_vm_create /tests/cloud/test_08_vm_provider.py 89
# ######################################################################
[0m
[34m
# ----------------------------------------------------------------------
# result
# ----------------------------------------------------------------------
# 1522:image /Users/rahul/cm/projects/cloudmesh-google/cloudmesh/google/compute/Provider.py
# ----------------------------------------------------------------------
# {'archiveSizeBytes': '15287535488',
#  'cm': {'cloud': 'google',
#         'collection': 'google-image',
#         'created': '2020-04-20 00:29:54.980376',
#         'driver': 'google',
#         'kind': 'image',
#         'modified': '2020-04-20 00:29:54.980376',
#         'name': 'ubuntu-1910-eoan-v20200413a'},
#  'creationTimestamp': '2020-04-14T09:36:17.075-07:00',
#  'description': 'Canonical, Ubuntu, 19.10, amd64 eoan image built on '
#                 '2020-04-13, supports Shielded VM features',
#  'diskSizeGb': '10',
#  'family': 'ubuntu-1910',
#  'guestOsFeatures': [{'type': 'VIRTIO_SCSI_MULTIQUEUE'},
#                      {'type': 'UEFI_COMPATIBLE'}],
#  'id': '4065347574729037935',
#  'kind': 'compute#image',
#  'labelFingerprint': '42WmSpB8rSM=',
#  'licenseCodes': ['1171116710542819062'],
#  'licenses': ['https://www.googleapis.com/compute/v1/projects/ubuntu-os-cloud/global/licenses/ubuntu-1910'],
#  'name': 'ubuntu-1910-eoan-v20200413a',
#  'rawDisk': {'containerType': 'TAR', 'source': ''},
#  'selfLink': 'https://www.googleapis.com/compute/v1/projects/ubuntu-os-cloud/global/images/ubuntu-1910-eoan-v20200413a',
#  'sourceType': 'RAW',
#  'status': 'READY',
#  'storageLocations': ['us',
#                       'asia',
#                       'us',
#                       'us',
#                       'eu',
#                       'us',
#                       'eu',
#                       'us',
#                       'asia',
#                       'us',
#                       'asia',
#                       'eu',
#                       'asia',
#                       'eu',
#                       'asia',
#                       'asia',
#                       'us',
#                       'eu',
#                       'us',
#                       'eu',
#                       'asia',
#                       'us',
#                       'asia'],
#  'updated': '2020-04-20 00:29:54.353341'}
# ----------------------------------------------------------------------
[0m
[34mINFO: Waiting for insert operation to finish : test-rahul-vm-136[0m
[32minsert on test-rahul-vm-136 is complete.[0m
[32mInstance test-rahul-vm-136 created successfully.[0m
[34m
# ----------------------------------------------------------------------
# result
# ----------------------------------------------------------------------
# 690:_info /Users/rahul/cm/projects/cloudmesh-google/cloudmesh/google/compute/Provider.py
# ----------------------------------------------------------------------
# [{'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'created': '2020-04-19T17:30:38.687-07:00 UTC',
#          'driver': 'google',
#          'kind': 'vm',
#          'name': 'test-rahul-vm-136',
#          'status': 'RUNNING',
#          'updated': '2020-04-20 00:30:45.140241'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': 'zIb1Nfe-PrA=',
#   'id': '6904351017860682689',
#   'ip_public': '35.215.89.18',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': [{'key': 'startup-script', 'value': ''},
#                {'key': 'bucket', 'value': 'cloudmesh-bucket'}],
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:30:45.140204',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': '3OeuFJ97rIs=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'RUNNING',
#   'type': 'Intel Skylake',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
[34mINFO: Waiting for setMetadata operation to finish : test-rahul-vm-136[0m
[32msetMetadata on test-rahul-vm-136 is complete.[0m
[32mMetadata keys added to instance test-rahul-vm-136[0m
[34m
# ----------------------------------------------------------------------
# created
# ----------------------------------------------------------------------
# 220:create ./cloudmesh/compute/vm/Provider.py
# ----------------------------------------------------------------------
# [{'_id': ObjectId('5e9ced2c0e2812c14023b7a3'),
#   'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'collection': 'google-vm',
#          'created': '2020-04-20 00:30:36.426531',
#          'creation': '9.00',
#          'group': 'default',
#          'kind': 'vm',
#          'label': 'test-rahul-vm-136',
#          'modified': '2020-04-20 00:30:50.912800',
#          'name': 'test-rahul-vm-136',
#          'status': 'available'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': 'zIb1Nfe-PrA=',
#   'id': '6904351017860682689',
#   'ip_public': '35.215.89.18',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': '{\'cm\': "{\'kind\': \'vm\', \'name\': \'test-rahul-vm-136\', '
#               "'label': 'test-rahul-vm-136', 'group': 'default', 'cloud': "
#               "'google', 'status': 'available', 'collection': 'google-vm', "
#               "'created': '2020-04-20 00:30:36.426531', 'modified': "
#               '\'2020-04-20 00:30:36.426531\', \'creation\': \'9.00\'}", '
#               "'image': 'ubuntu-1910', 'size': 10}",
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:30:45.140204',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': '3OeuFJ97rIs=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'RUNNING',
#   'type': 'Intel Skylake',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
[34m
# ----------------------------------------------------------------------
# data
# ----------------------------------------------------------------------
# 97:test_provider_vm_create ./tests/cloud/test_08_vm_provider.py
# ----------------------------------------------------------------------
# [{'_id': ObjectId('5e9ced2c0e2812c14023b7a3'),
#   'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'collection': 'google-vm',
#          'created': '2020-04-20 00:30:36.426531',
#          'creation': '9.00',
#          'driver': 'google',
#          'group': 'default',
#          'kind': 'vm',
#          'label': 'test-rahul-vm-136',
#          'modified': '2020-04-20 00:30:52.838899',
#          'name': 'test-rahul-vm-136',
#          'status': 'available',
#          'updated': '2020-04-20 00:30:52.308149'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': 'zIb1Nfe-PrA=',
#   'id': '6904351017860682689',
#   'ip_public': '35.215.89.18',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': '{\'cm\': "{\'kind\': \'vm\', \'name\': \'test-rahul-vm-136\', '
#               "'label': 'test-rahul-vm-136', 'group': 'default', 'cloud': "
#               "'google', 'status': 'available', 'collection': 'google-vm', "
#               "'created': '2020-04-20 00:30:36.426531', 'modified': "
#               '\'2020-04-20 00:30:36.426531\', \'creation\': \'9.00\'}", '
#               "'image': 'ubuntu-1910', 'size': 10}",
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:30:45.140204',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': '3OeuFJ97rIs=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'RUNNING',
#   'type': 'Intel Skylake',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
[34m
# ----------------------------------------------------------------------
# result
# ----------------------------------------------------------------------
# 690:_info /Users/rahul/cm/projects/cloudmesh-google/cloudmesh/google/compute/Provider.py
# ----------------------------------------------------------------------
# [{'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'created': '2020-04-19T17:30:38.687-07:00 UTC',
#          'driver': 'google',
#          'kind': 'vm',
#          'name': 'test-rahul-vm-136',
#          'status': 'RUNNING',
#          'updated': '2020-04-20 00:30:54.151842'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': '1aTtMKh1sWo=',
#   'id': '6904351017860682689',
#   'ip_public': '35.215.89.18',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': [{'key': 'startup-script', 'value': ''},
#                {'key': 'bucket', 'value': 'cloudmesh-bucket'},
#                {'key': 'cm',
#                 'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
#                          "'test-rahul-vm-136', 'group': 'default', 'cloud': "
#                          "'google', 'status': 'available', 'collection': "
#                          "'google-vm', 'created': '2020-04-20 "
#                          "00:30:36.426531', 'modified': '2020-04-20 "
#                          "00:30:36.426531', 'creation': '9.00'}"},
#                {'key': 'image', 'value': 'ubuntu-1910'},
#                {'key': 'size', 'value': '10'}],
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:30:54.151812',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': '3OeuFJ97rIs=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'RUNNING',
#   'type': 'Intel Skylake',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
status: {'name': 'test-rahul-vm-136', 'status:': 'RUNNING', 'cm.status': 'RUNNING'}
PASSED
tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_provider_vmprovider_vm_list 
[35m
# ######################################################################
# test_provider_vmprovider_vm_list /tests/cloud/test_08_vm_provider.py 110
# ######################################################################
[0m
+-------------------+---------+--------+---------------------+----------------------+------------+------------+----------------+-----------------------------+----------------+------------------+-------------+----------------------+-------------------------------+
| Name              | Cloud   | Kind   |                  Id | Type                 | Zone       | Status     | External IP    | Disk Name                   |   OS Disk Size | OS Name          | Disk Type   | Provisioning State   | Created                       |
|-------------------+---------+--------+---------------------+----------------------+------------+------------+----------------+-----------------------------+----------------+------------------+-------------+----------------------+-------------------------------|
| lampstack-2-vm    | google  | vm     | 8511304656472862802 | Unknown CPU Platform | us-west2-b | TERMINATED | Not Defined    | lampstack-vm-tmpl-boot-disk |             10 | debian-9-stretch | PERSISTENT  | READ_WRITE           | 2020-04-19T15:20:45.597-07:00 |
| test-rahul-vm-134 | google  | vm     | 6069526653895274748 | Intel Skylake        | us-west2-b | RUNNING    | 35.215.109.219 | test-rahul-vm-134-disk      |             10 | ubuntu-1910      | PERSISTENT  | READ_WRITE           | 2020-04-19T15:17:56.166-07:00 |
| test-rahul-vm-136 | google  | vm     | 6904351017860682689 | Intel Skylake        | us-west2-b | RUNNING    | 35.215.89.18   | test-rahul-vm-136-disk      |             10 | ubuntu-1910      | PERSISTENT  | READ_WRITE           | 2020-04-19T17:30:38.687-07:00 |
+-------------------+---------+--------+---------------------+----------------------+------------+------------+----------------+-----------------------------+----------------+------------------+-------------+----------------------+-------------------------------+
None
PASSED
tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_provider_vm_wait 
[35m
# ######################################################################
# test_provider_vm_wait /tests/cloud/test_08_vm_provider.py 118
# ######################################################################
[0m
PASSED
tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_provider_vm_ssh 
[35m
# ######################################################################
# test_provider_vm_ssh /tests/cloud/test_08_vm_provider.py 132
# ######################################################################
[0m
[31mb'ssh: connect to host 35.215.89.18 port 22: Connection refused\r\n'[0m

FAILED
tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_provider_vm_info 
[35m
# ######################################################################
# test_provider_vm_info /tests/cloud/test_08_vm_provider.py 146
# ######################################################################
[0m
[34m
# ----------------------------------------------------------------------
# result
# ----------------------------------------------------------------------
# 690:_info /Users/rahul/cm/projects/cloudmesh-google/cloudmesh/google/compute/Provider.py
# ----------------------------------------------------------------------
# [{'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'created': '2020-04-19T17:30:38.687-07:00 UTC',
#          'driver': 'google',
#          'kind': 'vm',
#          'name': 'test-rahul-vm-136',
#          'status': 'RUNNING',
#          'updated': '2020-04-20 00:30:58.396566'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': '1aTtMKh1sWo=',
#   'id': '6904351017860682689',
#   'ip_public': '35.215.89.18',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': [{'key': 'startup-script', 'value': ''},
#                {'key': 'bucket', 'value': 'cloudmesh-bucket'},
#                {'key': 'cm',
#                 'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
#                          "'test-rahul-vm-136', 'group': 'default', 'cloud': "
#                          "'google', 'status': 'available', 'collection': "
#                          "'google-vm', 'created': '2020-04-20 "
#                          "00:30:36.426531', 'modified': '2020-04-20 "
#                          "00:30:36.426531', 'creation': '9.00'}"},
#                {'key': 'image', 'value': 'ubuntu-1910'},
#                {'key': 'size', 'value': '10'}],
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:30:58.396533',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': '3OeuFJ97rIs=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'RUNNING',
#   'type': 'Intel Skylake',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
dry run info():
[{'cloud': 'google',
  'cm': {'cloud': 'google',
         'created': '2020-04-19T17:30:38.687-07:00 UTC',
         'driver': 'google',
         'kind': 'vm',
         'name': 'test-rahul-vm-136',
         'status': 'RUNNING',
         'updated': '2020-04-20 00:30:58.396566'},
  'created': '2020-04-19T17:30:38.687-07:00',
  'deviceName': 'test-rahul-vm-136-disk',
  'diskSizeGb': '10',
  'diskType': 'PERSISTENT',
  'fingerprint': '1aTtMKh1sWo=',
  'id': '6904351017860682689',
  'ip_public': '35.215.89.18',
  'kind': 'compute#instance',
  'machineType': 'g1-small',
  'metadata': [{'key': 'startup-script', 'value': ''},
               {'key': 'bucket', 'value': 'cloudmesh-bucket'},
               {'key': 'cm',
                'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
                         "'test-rahul-vm-136', 'group': 'default', 'cloud': "
                         "'google', 'status': 'available', 'collection': "
                         "'google-vm', 'created': '2020-04-20 "
                         "00:30:36.426531', 'modified': '2020-04-20 "
                         "00:30:36.426531', 'creation': '9.00'}"},
               {'key': 'image', 'value': 'ubuntu-1910'},
               {'key': 'size', 'value': '10'}],
  'mode': 'READ_WRITE',
  'modified': '2020-04-20 00:30:58.396533',
  'name': 'test-rahul-vm-136',
  'networkIP': '10.168.15.207',
  'network_fingerprint': '3OeuFJ97rIs=',
  'sourceImage': 'ubuntu-1910',
  'status': 'RUNNING',
  'type': 'Intel Skylake',
  'zone': 'us-west2-b'}]
PASSED
tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_vm_status 
[35m
# ######################################################################
# test_vm_status /tests/cloud/test_08_vm_provider.py 155
# ######################################################################
[0m
[34m
# ----------------------------------------------------------------------
# result
# ----------------------------------------------------------------------
# 690:_info /Users/rahul/cm/projects/cloudmesh-google/cloudmesh/google/compute/Provider.py
# ----------------------------------------------------------------------
# [{'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'created': '2020-04-19T17:30:38.687-07:00 UTC',
#          'driver': 'google',
#          'kind': 'vm',
#          'name': 'test-rahul-vm-136',
#          'status': 'RUNNING',
#          'updated': '2020-04-20 00:30:59.885685'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': '1aTtMKh1sWo=',
#   'id': '6904351017860682689',
#   'ip_public': '35.215.89.18',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': [{'key': 'startup-script', 'value': ''},
#                {'key': 'bucket', 'value': 'cloudmesh-bucket'},
#                {'key': 'cm',
#                 'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
#                          "'test-rahul-vm-136', 'group': 'default', 'cloud': "
#                          "'google', 'status': 'available', 'collection': "
#                          "'google-vm', 'created': '2020-04-20 "
#                          "00:30:36.426531', 'modified': '2020-04-20 "
#                          "00:30:36.426531', 'creation': '9.00'}"},
#                {'key': 'image', 'value': 'ubuntu-1910'},
#                {'key': 'size', 'value': '10'}],
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:30:59.885654',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': '3OeuFJ97rIs=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'RUNNING',
#   'type': 'Intel Skylake',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
{'name': 'test-rahul-vm-136', 'status:': 'RUNNING', 'cm.status': 'RUNNING'}
PASSED
tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_provider_vm_stop 
[35m
# ######################################################################
# test_provider_vm_stop /tests/cloud/test_08_vm_provider.py 171
# ######################################################################
[0m
[34mINFO: Waiting for stop operation to finish : test-rahul-vm-136[0m
[32mstop on test-rahul-vm-136 is complete.[0m
[34m
# ----------------------------------------------------------------------
# result
# ----------------------------------------------------------------------
# 690:_info /Users/rahul/cm/projects/cloudmesh-google/cloudmesh/google/compute/Provider.py
# ----------------------------------------------------------------------
# [{'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'created': '2020-04-19T17:30:38.687-07:00 UTC',
#          'driver': 'google',
#          'kind': 'vm',
#          'name': 'test-rahul-vm-136',
#          'status': 'TERMINATED',
#          'updated': '2020-04-20 00:33:21.997055'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': 'ocqIhGcEiLc=',
#   'id': '6904351017860682689',
#   'ip_public': 'Not Defined',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': [{'key': 'startup-script', 'value': ''},
#                {'key': 'bucket', 'value': 'cloudmesh-bucket'},
#                {'key': 'cm',
#                 'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
#                          "'test-rahul-vm-136', 'group': 'default', 'cloud': "
#                          "'google', 'status': 'available', 'collection': "
#                          "'google-vm', 'created': '2020-04-20 "
#                          "00:30:36.426531', 'modified': '2020-04-20 "
#                          "00:30:36.426531', 'creation': '9.00'}"},
#                {'key': 'image', 'value': 'ubuntu-1910'},
#                {'key': 'size', 'value': '10'}],
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:33:21.997027',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': 'epPzNzSDQkc=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'TERMINATED',
#   'type': 'Unknown CPU Platform',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
[34m
# ----------------------------------------------------------------------
# result
# ----------------------------------------------------------------------
# 690:_info /Users/rahul/cm/projects/cloudmesh-google/cloudmesh/google/compute/Provider.py
# ----------------------------------------------------------------------
# [{'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'created': '2020-04-19T17:30:38.687-07:00 UTC',
#          'driver': 'google',
#          'kind': 'vm',
#          'name': 'test-rahul-vm-136',
#          'status': 'TERMINATED',
#          'updated': '2020-04-20 00:33:28.343709'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': 'ocqIhGcEiLc=',
#   'id': '6904351017860682689',
#   'ip_public': 'Not Defined',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': [{'key': 'startup-script', 'value': ''},
#                {'key': 'bucket', 'value': 'cloudmesh-bucket'},
#                {'key': 'cm',
#                 'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
#                          "'test-rahul-vm-136', 'group': 'default', 'cloud': "
#                          "'google', 'status': 'available', 'collection': "
#                          "'google-vm', 'created': '2020-04-20 "
#                          "00:30:36.426531', 'modified': '2020-04-20 "
#                          "00:30:36.426531', 'creation': '9.00'}"},
#                {'key': 'image', 'value': 'ubuntu-1910'},
#                {'key': 'size', 'value': '10'}],
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:33:28.343680',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': 'epPzNzSDQkc=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'TERMINATED',
#   'type': 'Unknown CPU Platform',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
[34m
# ----------------------------------------------------------------------
# data
# ----------------------------------------------------------------------
# 187:test_provider_vm_stop ./tests/cloud/test_08_vm_provider.py
# ----------------------------------------------------------------------
# [{'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'collection': 'google-vm',
#          'created': '2020-04-19T17:30:38.687-07:00 UTC',
#          'creation': '9.00',
#          'driver': 'google',
#          'group': 'default',
#          'kind': 'vm',
#          'label': 'test-rahul-vm-136',
#          'modified': '2020-04-20 00:33:22.030747',
#          'name': 'test-rahul-vm-136',
#          'status': 'TERMINATED',
#          'updated': '2020-04-20 00:33:21.997055'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': 'ocqIhGcEiLc=',
#   'id': '6904351017860682689',
#   'ip_public': 'Not Defined',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': [{'key': 'startup-script', 'value': ''},
#                {'key': 'bucket', 'value': 'cloudmesh-bucket'},
#                {'key': 'cm',
#                 'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
#                          "'test-rahul-vm-136', 'group': 'default', 'cloud': "
#                          "'google', 'status': 'available', 'collection': "
#                          "'google-vm', 'created': '2020-04-20 "
#                          "00:30:36.426531', 'modified': '2020-04-20 "
#                          "00:30:36.426531', 'creation': '9.00'}"},
#                {'key': 'image', 'value': 'ubuntu-1910'},
#                {'key': 'size', 'value': '10'}],
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:33:21.997027',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': 'epPzNzSDQkc=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'TERMINATED',
#   'type': 'Unknown CPU Platform',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
{'name': 'test-rahul-vm-136', 'status:': 'TERMINATED', 'cm.status': 'TERMINATED'}
PASSED
tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_provider_vm_start 
[35m
# ######################################################################
# test_provider_vm_start /tests/cloud/test_08_vm_provider.py 191
# ######################################################################
[0m
[34mINFO: Waiting for start operation to finish : test-rahul-vm-136[0m
[32mstart on test-rahul-vm-136 is complete.[0m
[34m
# ----------------------------------------------------------------------
# result
# ----------------------------------------------------------------------
# 690:_info /Users/rahul/cm/projects/cloudmesh-google/cloudmesh/google/compute/Provider.py
# ----------------------------------------------------------------------
# [{'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'created': '2020-04-19T17:30:38.687-07:00 UTC',
#          'driver': 'google',
#          'kind': 'vm',
#          'name': 'test-rahul-vm-136',
#          'status': 'RUNNING',
#          'updated': '2020-04-20 00:33:37.560265'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': 'lkCMjrlqZ70=',
#   'id': '6904351017860682689',
#   'ip_public': '35.215.92.79',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': [{'key': 'startup-script', 'value': ''},
#                {'key': 'bucket', 'value': 'cloudmesh-bucket'},
#                {'key': 'cm',
#                 'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
#                          "'test-rahul-vm-136', 'group': 'default', 'cloud': "
#                          "'google', 'status': 'available', 'collection': "
#                          "'google-vm', 'created': '2020-04-20 "
#                          "00:30:36.426531', 'modified': '2020-04-20 "
#                          "00:30:36.426531', 'creation': '9.00'}"},
#                {'key': 'image', 'value': 'ubuntu-1910'},
#                {'key': 'size', 'value': '10'}],
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:33:37.560236',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': 'GutSJSi35AQ=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'RUNNING',
#   'type': 'Intel Skylake',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
[34m
# ----------------------------------------------------------------------
# result
# ----------------------------------------------------------------------
# 690:_info /Users/rahul/cm/projects/cloudmesh-google/cloudmesh/google/compute/Provider.py
# ----------------------------------------------------------------------
# [{'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'created': '2020-04-19T17:30:38.687-07:00 UTC',
#          'driver': 'google',
#          'kind': 'vm',
#          'name': 'test-rahul-vm-136',
#          'status': 'RUNNING',
#          'updated': '2020-04-20 00:33:43.703959'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': 'lkCMjrlqZ70=',
#   'id': '6904351017860682689',
#   'ip_public': '35.215.92.79',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': [{'key': 'startup-script', 'value': ''},
#                {'key': 'bucket', 'value': 'cloudmesh-bucket'},
#                {'key': 'cm',
#                 'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
#                          "'test-rahul-vm-136', 'group': 'default', 'cloud': "
#                          "'google', 'status': 'available', 'collection': "
#                          "'google-vm', 'created': '2020-04-20 "
#                          "00:30:36.426531', 'modified': '2020-04-20 "
#                          "00:30:36.426531', 'creation': '9.00'}"},
#                {'key': 'image', 'value': 'ubuntu-1910'},
#                {'key': 'size', 'value': '10'}],
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:33:43.703929',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': 'GutSJSi35AQ=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'RUNNING',
#   'type': 'Intel Skylake',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
[34m
# ----------------------------------------------------------------------
# data
# ----------------------------------------------------------------------
# 206:test_provider_vm_start ./tests/cloud/test_08_vm_provider.py
# ----------------------------------------------------------------------
# [{'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'collection': 'google-vm',
#          'created': '2020-04-19T17:30:38.687-07:00 UTC',
#          'creation': '9.00',
#          'driver': 'google',
#          'group': 'default',
#          'kind': 'vm',
#          'label': 'test-rahul-vm-136',
#          'modified': '2020-04-20 00:33:37.593256',
#          'name': 'test-rahul-vm-136',
#          'status': 'RUNNING',
#          'updated': '2020-04-20 00:33:37.560265'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': 'lkCMjrlqZ70=',
#   'id': '6904351017860682689',
#   'ip_public': '35.215.92.79',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': [{'key': 'startup-script', 'value': ''},
#                {'key': 'bucket', 'value': 'cloudmesh-bucket'},
#                {'key': 'cm',
#                 'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
#                          "'test-rahul-vm-136', 'group': 'default', 'cloud': "
#                          "'google', 'status': 'available', 'collection': "
#                          "'google-vm', 'created': '2020-04-20 "
#                          "00:30:36.426531', 'modified': '2020-04-20 "
#                          "00:30:36.426531', 'creation': '9.00'}"},
#                {'key': 'image', 'value': 'ubuntu-1910'},
#                {'key': 'size', 'value': '10'}],
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:33:37.560236',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': 'GutSJSi35AQ=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'RUNNING',
#   'type': 'Intel Skylake',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
{'name': 'test-rahul-vm-136', 'status:': 'RUNNING', 'cm.status': 'RUNNING'}
PASSED
tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_provider_vm_terminate 
[35m
# ######################################################################
# test_provider_vm_terminate /tests/cloud/test_08_vm_provider.py 213
# ######################################################################
[0m
[34m
# ----------------------------------------------------------------------
# result
# ----------------------------------------------------------------------
# 690:_info /Users/rahul/cm/projects/cloudmesh-google/cloudmesh/google/compute/Provider.py
# ----------------------------------------------------------------------
# [{'cloud': 'google',
#   'cm': {'cloud': 'google',
#          'created': '2020-04-19T17:30:38.687-07:00 UTC',
#          'driver': 'google',
#          'kind': 'vm',
#          'name': 'test-rahul-vm-136',
#          'status': 'RUNNING',
#          'updated': '2020-04-20 00:33:45.956767'},
#   'created': '2020-04-19T17:30:38.687-07:00',
#   'deviceName': 'test-rahul-vm-136-disk',
#   'diskSizeGb': '10',
#   'diskType': 'PERSISTENT',
#   'fingerprint': 'lkCMjrlqZ70=',
#   'id': '6904351017860682689',
#   'ip_public': '35.215.92.79',
#   'kind': 'compute#instance',
#   'machineType': 'g1-small',
#   'metadata': [{'key': 'startup-script', 'value': ''},
#                {'key': 'bucket', 'value': 'cloudmesh-bucket'},
#                {'key': 'cm',
#                 'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
#                          "'test-rahul-vm-136', 'group': 'default', 'cloud': "
#                          "'google', 'status': 'available', 'collection': "
#                          "'google-vm', 'created': '2020-04-20 "
#                          "00:30:36.426531', 'modified': '2020-04-20 "
#                          "00:30:36.426531', 'creation': '9.00'}"},
#                {'key': 'image', 'value': 'ubuntu-1910'},
#                {'key': 'size', 'value': '10'}],
#   'mode': 'READ_WRITE',
#   'modified': '2020-04-20 00:33:45.956740',
#   'name': 'test-rahul-vm-136',
#   'networkIP': '10.168.15.207',
#   'network_fingerprint': 'GutSJSi35AQ=',
#   'sourceImage': 'ubuntu-1910',
#   'status': 'RUNNING',
#   'type': 'Intel Skylake',
#   'zone': 'us-west2-b'}]
# ----------------------------------------------------------------------
[0m
[34mINFO: Waiting for delete operation to finish : test-rahul-vm-136[0m
[32mdelete on test-rahul-vm-136 is complete.[0m
[32mtest-rahul-vm-136 deleted successfully.[0m
[{'cloud': 'google',
  'cm': {'cloud': 'google',
         'collection': 'google-vm',
         'created': '2020-04-19T17:30:38.687-07:00 UTC',
         'creation': '9.00',
         'driver': 'google',
         'group': 'default',
         'kind': 'vm',
         'label': 'test-rahul-vm-136',
         'modified': '2020-04-20 00:36:09.537298',
         'name': 'test-rahul-vm-136',
         'status': 'RUNNING',
         'updated': '2020-04-20 00:33:45.956767'},
  'created': '2020-04-19T17:30:38.687-07:00',
  'deviceName': 'test-rahul-vm-136-disk',
  'diskSizeGb': '10',
  'diskType': 'PERSISTENT',
  'fingerprint': 'lkCMjrlqZ70=',
  'id': '6904351017860682689',
  'ip_public': '35.215.92.79',
  'kind': 'compute#instance',
  'machineType': 'g1-small',
  'metadata': [{'key': 'startup-script', 'value': ''},
               {'key': 'bucket', 'value': 'cloudmesh-bucket'},
               {'key': 'cm',
                'value': "{'kind': 'vm', 'name': 'test-rahul-vm-136', 'label': "
                         "'test-rahul-vm-136', 'group': 'default', 'cloud': "
                         "'google', 'status': 'available', 'collection': "
                         "'google-vm', 'created': '2020-04-20 "
                         "00:30:36.426531', 'modified': '2020-04-20 "
                         "00:30:36.426531', 'creation': '9.00'}"},
               {'key': 'image', 'value': 'ubuntu-1910'},
               {'key': 'size', 'value': '10'}],
  'mode': 'READ_WRITE',
  'modified': '2020-04-20 00:33:45.956740',
  'name': 'test-rahul-vm-136',
  'networkIP': '10.168.15.207',
  'network_fingerprint': 'GutSJSi35AQ=',
  'sourceImage': 'ubuntu-1910',
  'status': 'DELETED',
  'type': 'Intel Skylake',
  'zone': 'us-west2-b'}]
PASSED
tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_benchmark 

+------------------------------------------------------+----------+---------+---------------------+--------+--------------+--------+--------+-----------+
| Name                                                 | Status   |    Time | Start               | tag    | Node         | User   | OS     | Version   |
|------------------------------------------------------+----------+---------+---------------------+--------+--------------+--------+--------+-----------|
| test_08_vm_provider/test_provider_vm_create          | ok       |  16.48  | 2020-04-20 00:30:36 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| create vm test-rahul-vm-136                          | failed   |   8.753 | 2020-04-20 00:30:36 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_08_vm_provider/test_provider_vmprovider_vm_list | ok       |   1.224 | 2020-04-20 00:30:54 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_08_vm_provider/test_provider_vm_wait            | ok       |   0.053 | 2020-04-20 00:30:55 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_08_vm_provider/test_provider_vm_ssh             | failed   |         | 2020-04-20 00:30:55 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_08_vm_provider/test_provider_vm_info            | ok       |   1.26  | 2020-04-20 00:30:57 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_08_vm_provider/test_vm_status                   | ok       |   1.479 | 2020-04-20 00:30:58 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_08_vm_provider/test_provider_vm_stop            | ok       | 142.126 | 2020-04-20 00:30:59 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_08_vm_provider/test_provider_vm_start           | ok       |   9.217 | 2020-04-20 00:33:28 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
| test_08_vm_provider/test_provider_vm_terminate       | ok       | 145.801 | 2020-04-20 00:33:43 | google | rjdharmc-mac | rahul  | Darwin | 10.14.6   |
+------------------------------------------------------+----------+---------+---------------------+--------+--------------+--------+--------+-----------+

# csv,timer,status,time,start,tag,uname.node,user,uname.system,platform.version
# csv,test_08_vm_provider/test_provider_vm_create,ok,16.48,2020-04-20 00:30:36,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,create vm test-rahul-vm-136,failed,8.753,2020-04-20 00:30:36,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_08_vm_provider/test_provider_vmprovider_vm_list,ok,1.224,2020-04-20 00:30:54,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_08_vm_provider/test_provider_vm_wait,ok,0.053,2020-04-20 00:30:55,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_08_vm_provider/test_provider_vm_ssh,failed,None,2020-04-20 00:30:55,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_08_vm_provider/test_provider_vm_info,ok,1.26,2020-04-20 00:30:57,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_08_vm_provider/test_vm_status,ok,1.479,2020-04-20 00:30:58,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_08_vm_provider/test_provider_vm_stop,ok,142.126,2020-04-20 00:30:59,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_08_vm_provider/test_provider_vm_start,ok,9.217,2020-04-20 00:33:28,google,rjdharmc-mac,rahul,Darwin,10.14.6
# csv,test_08_vm_provider/test_provider_vm_terminate,ok,145.801,2020-04-20 00:33:43,google,rjdharmc-mac,rahul,Darwin,10.14.6

PASSED

=================================== FAILURES ===================================
____________________ Test_provider_vm.test_find_largest_id _____________________

self = <test_08_vm_provider.Test_provider_vm object at 0x107de8b20>

    def test_find_largest_id(self):
        name = Name()
>       counter = {"counter": self.find_counter()}

tests/cloud/test_08_vm_provider.py:86: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <test_08_vm_provider.Test_provider_vm object at 0x107de8b20>

    def find_counter(self):
        name = str(Name())
        print(name)
        vms = provider.list()
        print(f'VM is {vms}')
        if not vms:
            numbers = []
            names = []
            for vm in vms:
                names.append(vm['name'])
                numbers.append(int(vm['name'].rsplit("-", 1)[1]))
    
            numbers.sort()
    
>       if len(numbers) > 0:
E       UnboundLocalError: local variable 'numbers' referenced before assignment

tests/cloud/test_08_vm_provider.py:77: UnboundLocalError
------------------------------ Captured log call -------------------------------
WARNING  googleapiclient.discovery_cache:__init__.py:46 file_cache is unavailable when using oauth2client >= 4.0.0 or google-auth
Traceback (most recent call last):
  File "/Users/rahul/ENV3/lib/python3.8/site-packages/googleapiclient/discovery_cache/__init__.py", line 36, in autodetect
    from google.appengine.api import memcache
ModuleNotFoundError: No module named 'google.appengine'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rahul/ENV3/lib/python3.8/site-packages/googleapiclient/discovery_cache/file_cache.py", line 33, in <module>
    from oauth2client.contrib.locked_file import LockedFile
ModuleNotFoundError: No module named 'oauth2client.contrib.locked_file'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rahul/ENV3/lib/python3.8/site-packages/googleapiclient/discovery_cache/file_cache.py", line 37, in <module>
    from oauth2client.locked_file import LockedFile
ModuleNotFoundError: No module named 'oauth2client.locked_file'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rahul/ENV3/lib/python3.8/site-packages/googleapiclient/discovery_cache/__init__.py", line 42, in autodetect
    from . import file_cache
  File "/Users/rahul/ENV3/lib/python3.8/site-packages/googleapiclient/discovery_cache/file_cache.py", line 40, in <module>
    raise ImportError(
ImportError: file_cache is unavailable when using oauth2client >= 4.0.0 or google-auth
____________________ Test_provider_vm.test_provider_vm_ssh _____________________

self = <test_08_vm_provider.Test_provider_vm object at 0x10ae16a60>

    def test_provider_vm_ssh(self):
        HEADING()
        name = str(Name())
        Benchmark.Start()
        cm = CmDatabase()
        vm = cm.find_name(name, kind="vm")[0]
        data = provider.ssh(vm=vm, command='\"echo IAmAlive\"')
        print(data)
>       assert 'IAmAlive' in data
E       AssertionError: assert 'IAmAlive' in ''

tests/cloud/test_08_vm_provider.py:140: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  googleapiclient.discovery_cache:__init__.py:46 file_cache is unavailable when using oauth2client >= 4.0.0 or google-auth
Traceback (most recent call last):
  File "/Users/rahul/ENV3/lib/python3.8/site-packages/googleapiclient/discovery_cache/__init__.py", line 36, in autodetect
    from google.appengine.api import memcache
ModuleNotFoundError: No module named 'google.appengine'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rahul/ENV3/lib/python3.8/site-packages/googleapiclient/discovery_cache/file_cache.py", line 33, in <module>
    from oauth2client.contrib.locked_file import LockedFile
ModuleNotFoundError: No module named 'oauth2client.contrib.locked_file'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rahul/ENV3/lib/python3.8/site-packages/googleapiclient/discovery_cache/file_cache.py", line 37, in <module>
    from oauth2client.locked_file import LockedFile
ModuleNotFoundError: No module named 'oauth2client.locked_file'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/rahul/ENV3/lib/python3.8/site-packages/googleapiclient/discovery_cache/__init__.py", line 42, in autodetect
    from . import file_cache
  File "/Users/rahul/ENV3/lib/python3.8/site-packages/googleapiclient/discovery_cache/file_cache.py", line 40, in <module>
    raise ImportError(
ImportError: file_cache is unavailable when using oauth2client >= 4.0.0 or google-auth
=========================== short test summary info ============================
FAILED tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_find_largest_id
FAILED tests/cloud/test_08_vm_provider.py::Test_provider_vm::test_provider_vm_ssh
=================== 2 failed, 10 passed in 376.86s (0:06:16) ===================
